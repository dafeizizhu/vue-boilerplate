/*!
 * @project : facecarnival
 * @version : 1.0.0
 * @author  : Mrfangge
 * @update  : 2018-01-15 10:24:54 am
 */(function(e){e.Callbacks=function(n){n=e.extend({},n);var i,t,r,a,o,s,c=[],u=!n.once&&[],f=function(e){i=n.memory&&e;t=true;s=a||0;a=0;o=c.length;r=true;for(;c&&s<o;++s){if(c[s].apply(e[0],e[1])===false&&n.stopOnFalse){i=false;break}}r=false;if(c){if(u)u.length&&f(u.shift());else if(i)c.length=0;else l.disable()}},l={add:function(){if(c){var t=c.length,s=function(i){e.each(i,function(e,i){if(typeof i==="function"){if(!n.unique||!l.has(i))c.push(i)}else if(i&&i.length&&typeof i!=="string")s(i)})};s(arguments);if(r)o=c.length;else if(i){a=t;f(i)}}return this},remove:function(){if(c){e.each(arguments,function(n,i){var t;while((t=e.inArray(i,c,t))>-1){c.splice(t,1);if(r){if(t<=o)--o;if(t<=s)--s}}})}return this},has:function(n){return!!(c&&(n?e.inArray(n,c)>-1:c.length))},empty:function(){o=c.length=0;return this},disable:function(){c=u=i=undefined;return this},disabled:function(){return!c},lock:function(){u=undefined;if(!i)l.disable();return this},locked:function(){return!u},fireWith:function(e,n){if(c&&(!t||u)){n=n||[];n=[e,n.slice?n.slice():n];if(r)u.push(n);else f(n)}return this},fire:function(){return l.fireWith(this,arguments)},fired:function(){return!!t}};return l}})(Zepto);(function(e){var n=Array.prototype.slice;function i(n){var t=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],r="pending",a={state:function(){return r},always:function(){o.done(arguments).fail(arguments);return this},then:function(){var n=arguments;return i(function(i){e.each(t,function(t,r){var s=e.isFunction(n[t])&&n[t];o[r[1]](function(){var n=s&&s.apply(this,arguments);if(n&&e.isFunction(n.promise)){n.promise().done(i.resolve).fail(i.reject).progress(i.notify)}else{var t=this===a?i.promise():this,o=s?[n]:arguments;i[r[0]+"With"](t,o)}})});n=null}).promise()},promise:function(n){return n!=null?e.extend(n,a):a}},o={};e.each(t,function(e,n){var i=n[2],s=n[3];a[n[1]]=i.add;if(s){i.add(function(){r=s},t[e^1][2].disable,t[2][2].lock)}o[n[0]]=function(){o[n[0]+"With"](this===o?a:this,arguments);return this};o[n[0]+"With"]=i.fireWith});a.promise(o);if(n)n.call(o,o);return o}e.when=function(t){var r=n.call(arguments),a=r.length,o=0,s=a!==1||t&&e.isFunction(t.promise)?a:0,c=s===1?t:i(),u,f,l,h=function(e,i,t){return function(r){i[e]=this;t[e]=arguments.length>1?n.call(arguments):r;if(t===u){c.notifyWith(i,t)}else if(!--s){c.resolveWith(i,t)}}};if(a>1){u=new Array(a);f=new Array(a);l=new Array(a);for(;o<a;++o){if(r[o]&&e.isFunction(r[o].promise)){r[o].promise().done(h(o,l,r)).fail(c.reject).progress(h(o,f,u))}else{--s}}}if(!s)c.resolveWith(l,r);return c.promise()};e.Deferred=i})(Zepto);function getData(e,n,i){return $.ajax({url:e,dataType:"jsonp",jsonpCallback:i})}function WeixinShare(e,n){this.data=$.extend({title:"",desc:"",link:"",imgUrl:"",type:"",dataUrl:"",success:function(){},cancel:function(){}},e);this.isDebug=n||false;this.init()}WeixinShare.prototype.init=function(){var e=this;getData("https://m.huya.com/index.php?m=WechatJsApi&do=getSignature",{},"getSign").done(function(n){var i=n;e.getWeixinJs(i)})};WeixinShare.prototype.getWeixinJs=function(e){var n=this;n.weixinInit(wx,e)};WeixinShare.prototype.weixinInit=function(e,n){var i=this;e.config({debug:i.isDebug,appId:n.appId,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]});e.ready(function(){e.onMenuShareTimeline(i.data);e.onMenuShareAppMessage(i.data);e.onMenuShareQQ(i.data);e.onMenuShareWeibo(i.data);e.onMenuShareQZone(i.data)});e.error(function(e){})};window.WeixinShare=WeixinShare;function sendWeixinInfo(e){var n="我已入坑无法自拨，快来的直播间救我",i=e||{};var t={title:i.title||n,desc:i.desc||"虎牙直播-中国领先的互动直播平台。热门赛事、顶尖战队、大神美女陪你一起玩。",link:location.href,imgUrl:i.imgUrl||"http://img.dwstatic.com/shangjing/https://hd.huya.com/yanzhicarnival/facecarnival/img/huya_logo.jpg",success:function(){}};new WeixinShare(t,false);HUYASdk.setShareInfo({isShow:true,title:i.title||n,url:window.location.href,shareUrl:window.location.href,content:i.desc||"虎牙直播-中国领先的互动直播平台。热门赛事、顶尖战队、大神美女陪你一起玩。",imageUrl:i.imgUrl||"http://img.dwstatic.com/shangjing/https://hd.huya.com/yanzhicarnival/facecarnival/img/huya_logo.jpg"})}sendWeixinInfo(shareData);